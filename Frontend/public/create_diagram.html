<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body style="margin: 0; padding: 20px; background: white;">
    <div id="diagram" style="background: white; padding: 40px; width: 1000px; height: 500px; display: flex; align-items: center; justify-content: center;">
        <svg width="900" height="400" viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg">
            <!-- Define arrowheads -->
            <defs>
                <marker id="arrowhead-gray" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
                    <polygon points="0 0, 12 3, 0 6" fill="#888" />
                </marker>
            </defs>
            
            <!-- Top arrow from Agent to Planning -->
            <path d="M 420 190 L 550 130" stroke="#888" stroke-width="3" fill="none" marker-end="url(#arrowhead-gray)" />
            
            <!-- Middle arrow from Agent to Memory (left side) -->
            <line x1="420" y1="210" x2="550" y2="210" stroke="#888" stroke-width="3" marker-end="url(#arrowhead-gray)" />
            
            <!-- Bottom arrow from Agent to Tools -->
            <path d="M 420 230 L 550 290" stroke="#888" stroke-width="3" fill="none" marker-end="url(#arrowhead-gray)" />
            
            <!-- Return arrows from boxes to Agent (curved) -->
            <!-- From Planning back to Agent -->
            <path d="M 550 150 Q 485 170 420 190" stroke="#888" stroke-width="3" fill="none" marker-end="url(#arrowhead-gray)" />
            
            <!-- From Memory back to Agent -->
            <line x1="550" y1="210" x2="420" y2="210" stroke="#888" stroke-width="3" marker-end="url(#arrowhead-gray)" />
            
            <!-- From Tools back to Agent -->
            <path d="M 550 270 Q 485 250 420 230" stroke="#888" stroke-width="3" fill="none" marker-end="url(#arrowhead-gray)" />
            
            <!-- Arrow from User Request to Agent (left) -->
            <line x1="180" y1="210" x2="320" y2="210" stroke="#888" stroke-width="3" marker-end="url(#arrowhead-gray)" />
            
            <!-- Arrow from Agent back to User Request -->
            <line x1="320" y1="190" x2="180" y2="190" stroke="#888" stroke-width="3" marker-end="url(#arrowhead-gray)" />
            
            <!-- Down arrow from Agent to Tools (bottom) -->
            <path d="M 370 230 L 370 290" stroke="#888" stroke-width="3" fill="none" marker-end="url(#arrowhead-gray)" />
            
            <!-- User Request Box -->
            <rect x="40" y="150" width="140" height="120" rx="15" fill="none" stroke="#FF9944" stroke-width="3"/>
            <text x="110" y="220" font-family="Arial, sans-serif" font-size="18" font-weight="400" text-anchor="middle" fill="#333">User request</text>
            
            <!-- Agent Box -->
            <rect x="320" y="150" width="100" height="120" rx="15" fill="none" stroke="#44DD88" stroke-width="3"/>
            <text x="370" y="220" font-family="Arial, sans-serif" font-size="18" font-weight="400" text-anchor="middle" fill="#333">Agent</text>
            
            <!-- Planning Box -->
            <rect x="550" y="80" width="200" height="90" rx="15" fill="none" stroke="#FF6B9D" stroke-width="3"/>
            <text x="575" y="128" font-family="Arial, sans-serif" font-size="24" fill="#FF6B9D">üìã</text>
            <text x="700" y="135" font-family="Arial, sans-serif" font-size="18" font-weight="400" fill="#333">Planning</text>
            
            <!-- Memory Box -->
            <rect x="550" y="165" width="200" height="90" rx="15" fill="none" stroke="#FF6B9D" stroke-width="3"/>
            <text x="575" y="218" font-family="Arial, sans-serif" font-size="24" fill="#FF6B9D">‚ò∞</text>
            <text x="700" y="225" font-family="Arial, sans-serif" font-size="18" font-weight="400" fill="#333">Memory</text>
            
            <!-- Tools Box -->
            <rect x="550" y="250" width="200" height="90" rx="15" fill="none" stroke="#FF6B9D" stroke-width="3"/>
            <text x="575" y="298" font-family="Arial, sans-serif" font-size="24" fill="#FF6B9D">‚öíÔ∏è</text>
            <text x="700" y="305" font-family="Arial, sans-serif" font-size="18" font-weight="400" fill="#333">Tools</text>
        </svg>
    </div>
    <script>
        html2canvas(document.getElementById('diagram'), {
            backgroundColor: '#ffffff',
            scale: 2,
            allowTaint: true,
            useCORS: true
        }).then(canvas => {
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/jpeg', 0.95);
            link.download = 'diagram.jpg';
            link.click();
        });
    </script>
</body>
</html>
